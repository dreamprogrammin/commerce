# üöÄ Google Indexing API - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

## –ß—Ç–æ —ç—Ç–æ?

**Google Indexing API** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API –æ—Ç Google, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é URL –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –≤ Google Search Console.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö URL
- ‚úÖ –î–æ 200 URL –≤ –¥–µ–Ω—å (vs 10 –≤—Ä—É—á–Ω—É—é)
- ‚úÖ –ú–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ CI/CD
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ —á–µ–º —Ä—É—á–Ω–æ–π –∑–∞–ø—Ä–æ—Å

**–õ–∏–º–∏—Ç—ã:**
- üìä 200 URL –≤ –¥–µ–Ω—å
- üîÑ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- üìà –ú–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–≤–æ—Ç—ã

---

## üìã –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ Google Service Account

### 1.1. –û—Ç–∫—Ä–æ–π—Ç–µ Google Cloud Console

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://console.cloud.google.com/

### 1.2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç (–∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

1. –í–≤–µ—Ä—Ö—É –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
2. **"–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç"**
3. –ù–∞–∑–≤–∞–Ω–∏–µ: `uhti-indexing` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
4. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**

### 1.3. –í–∫–ª—é—á–∏—Ç–µ Indexing API

1. –õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí **"API –∏ —Å–µ—Ä–≤–∏—Å—ã"** ‚Üí **"–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞"**
2. –ù–∞–π–¥–∏—Ç–µ: `Indexing API`
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
4. –ù–∞–∂–º–∏—Ç–µ **"–í–∫–ª—é—á–∏—Ç—å"**

### 1.4. –°–æ–∑–¥–∞–π—Ç–µ Service Account

1. –õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí **"API –∏ —Å–µ—Ä–≤–∏—Å—ã"** ‚Üí **"–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"**
2. –í–≤–µ—Ä—Ö—É –Ω–∞–∂–º–∏—Ç–µ **"+ –°–æ–∑–¥–∞—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"–°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **–ò–º—è:** `uhti-indexing-bot`
   - **–û–ø–∏—Å–∞–Ω–∏–µ:** `Bot for automatic indexing requests`
5. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å"**
6. **–†–æ–ª—å:** –≤—ã–±–µ—Ä–∏—Ç–µ `Owner` (–í–ª–∞–¥–µ–ª–µ—Ü) –∏–ª–∏ `Editor` (–†–µ–¥–∞–∫—Ç–æ—Ä)
7. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"** ‚Üí **"–ì–æ—Ç–æ–≤–æ"**

### 1.5. –°–æ–∑–¥–∞–π—Ç–µ JSON –∫–ª—é—á

1. –í —Å–ø–∏—Å–∫–µ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –Ω–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π `uhti-indexing-bot`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
3. –í–∫–ª–∞–¥–∫–∞ **"–ö–ª—é—á–∏"**
4. **"–î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á"** ‚Üí **"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á"**
5. –¢–∏–ø: **JSON**
6. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**
7. –§–∞–π–ª `service-account.json` —Å–∫–∞—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –•—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ —Å–µ–∫—Ä–µ—Ç–µ! –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ git!

### 1.6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

–û–Ω –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```
uhti-indexing-bot@uhti-indexing.iam.gserviceaccount.com
```

---

## üìã –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ Service Account –≤ Google Search Console

### 2.1. –û—Ç–∫—Ä–æ–π—Ç–µ Google Search Console

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://search.google.com/search-console

### 2.2. –î–æ–±–∞–≤—å—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞

1. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Å—É—Ä—Å `uhti.kz`
2. –õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"** (–≤–Ω–∏–∑—É)
3. –†–∞–∑–¥–µ–ª **"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è"**
4. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"**
5. Email: –≤—Å—Ç–∞–≤—å—Ç–µ email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
   ```
   uhti-indexing-bot@uhti-indexing.iam.gserviceaccount.com
   ```
6. –ü—Ä–∞–≤–∞: **"–í–ª–∞–¥–µ–ª–µ—Ü"** (Owner)
7. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å"**

---

## üìã –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd /path/to/project
npm install googleapis
```

–ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ pnpm:
```bash
pnpm add googleapis
```

---

## üìã –®–∞–≥ 4: –ü–æ–ª–æ–∂–∏—Ç–µ –∫–ª—é—á –≤ –ø—Ä–æ–µ–∫—Ç

1. –°–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª `service-account.json` –ø–æ–ª–æ–∂–∏—Ç–µ –≤ **–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞**
2. **–í–ê–ñ–ù–û:** –î–æ–±–∞–≤—å—Ç–µ –≤ `.gitignore`:

```bash
# .gitignore
service-account.json
*.json.key
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
cat .gitignore | grep service-account
```

---

## üìã –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

```bash
node scripts/request-indexing.js
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**

```
üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏...

üîÑ –ü–æ–ª—É—á–∞—é —Å–ø–∏—Å–æ–∫ URL –∏–∑ /api/sitemap-routes...
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ 23 URL –∏–∑ sitemap

üìä –í—Å–µ–≥–æ URL –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ: 23
‚è±Ô∏è  –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è: 1 –º–∏–Ω—É—Ç

‚úÖ Google Indexing API –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
üìß Service Account: uhti-indexing-bot@uhti-indexing.iam.gserviceaccount.com

[1/23] –û–±—Ä–∞–±–æ—Ç–∫–∞: https://uhti.kz/
  ‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
[2/23] –û–±—Ä–∞–±–æ—Ç–∫–∞: https://uhti.kz/catalog
  ‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
[3/23] –û–±—Ä–∞–±–æ—Ç–∫–∞: https://uhti.kz/catalog/girls
  ‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
...

üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´:
‚úÖ –£—Å–ø–µ—à–Ω–æ: 23
‚ùå –û—à–∏–±–æ–∫: 0

‚úÖ –ì–æ—Ç–æ–≤–æ! –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–ø—Ä–æ—à–µ–Ω–∞.
‚è≥ Google –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 1-3 –¥–Ω–µ–π.
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π API endpoint `/api/sitemap-routes`
- ‚úÖ –ù–∏–∫–∞–∫–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –∏–ª–∏ –ª–æ–≥–∏–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ sitemap
- ‚úÖ –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ - –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞
- ‚úÖ –°–æ–±–ª—é–¥–∞–µ—Ç –ª–∏–º–∏—Ç 200 URL –≤ –¥–µ–Ω—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è (GitHub Actions)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.github/workflows/request-indexing.yml`:

```yaml
name: Request Google Indexing

on:
  push:
    branches:
      - main
  workflow_dispatch: # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  request-indexing:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm install googleapis

      - name: Create service account file
        run: echo '${{ secrets.GOOGLE_SERVICE_ACCOUNT }}' > service-account.json

      - name: Request indexing
        run: node scripts/request-indexing.js
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–∞:**
1. GitHub ‚Üí Settings ‚Üí Secrets ‚Üí New repository secret
2. Name: `GOOGLE_SERVICE_ACCOUNT`
3. Value: —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `service-account.json` (–≤–µ—Å—å JSON)

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (cron)

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –û—Ç–∫—Ä—ã—Ç—å crontab
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00 —É—Ç—Ä–∞)
0 3 * * * cd /path/to/project && node scripts/request-indexing.js >> /var/log/indexing.log 2>&1
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í—ã–∑–æ–≤ –∏–∑ Nuxt (–ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞)

–°–æ–∑–¥–∞–π—Ç–µ `/server/api/request-indexing.post.ts`:

```typescript
import { google } from 'googleapis';
import fs from 'fs';
import path from 'path';

export default defineEventHandler(async (event) => {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
  const user = await serverSupabaseUser(event);
  if (!user) {
    throw createError({
      statusCode: 401,
      message: 'Unauthorized',
    });
  }

  // –ü–æ–ª—É—á–∞–µ–º URL –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
  const { url } = await readBody(event);

  if (!url || !url.startsWith('https://uhti.kz/')) {
    throw createError({
      statusCode: 400,
      message: 'Invalid URL',
    });
  }

  try {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è API
    const keyFilePath = path.join(process.cwd(), 'service-account.json');

    if (!fs.existsSync(keyFilePath)) {
      throw new Error('Service account file not found');
    }

    const auth = new google.auth.GoogleAuth({
      keyFile: keyFilePath,
      scopes: ['https://www.googleapis.com/auth/indexing'],
    });

    const authClient = await auth.getClient();
    const indexing = google.indexing({
      version: 'v3',
      auth: authClient,
    });

    // –ó–∞–ø—Ä–æ—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
    const response = await indexing.urlNotifications.publish({
      requestBody: {
        url: url,
        type: 'URL_UPDATED',
      },
    });

    return {
      success: true,
      url: url,
      data: response.data,
    };
  } catch (error: any) {
    throw createError({
      statusCode: 500,
      message: error.message,
    });
  }
});
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:**

```typescript
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ –≤ –∞–¥–º–∏–Ω–∫–µ
async function createProduct(productData) {
  // –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
  const product = await productsStore.createProduct(productData);

  // –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
  await $fetch('/api/request-indexing', {
    method: 'POST',
    body: {
      url: `https://uhti.kz/catalog/products/${product.slug}`,
    },
  });
}
```

---

## ‚ÑπÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ URL –∏–∑ –≤–∞—à–µ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ API endpoint:

**–û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è URL:**
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–∞—à endpoint: `https://uhti.kz/api/sitemap-routes`
- –≠—Ç–æ—Ç endpoint —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `/server/api/sitemap-routes.ts`
- –û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–æ–≤–∞—Ä—ã, –±—Ä–µ–Ω–¥—ã, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –°–∫—Ä–∏–ø—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥—ã–π URL –≤ Google Indexing API

**–ß—Ç–æ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è:**
- –í—Å—ë, —á—Ç–æ –µ—Å—Ç—å –≤ –≤–∞—à–µ–º sitemap.xml
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–æ–≤–∞—Ä—ã, –±—Ä–µ–Ω–¥—ã, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–õ–∏–º–∏—Ç Google:**
- –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –±–æ–ª—å—à–µ 200 URL ‚Üí –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –ø–µ—Ä–≤—ã–µ 200
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å

---

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è URL –∏–∑ sitemap API"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ `/api/sitemap-routes`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω: `https://uhti.kz`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç: `https://uhti.kz/api/sitemap-routes`
   ```bash
   curl https://uhti.kz/api/sitemap-routes
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∞–π—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ production

---

### –û—à–∏–±–∫–∞: "–ù–µ –Ω–∞–π–¥–µ–Ω–æ URL –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏"

**–ü—Ä–∏—á–∏–Ω–∞:** API –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–æ–≤–∞—Ä—ã, –±—Ä–µ–Ω–¥—ã)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç:
   ```bash
   curl https://uhti.kz/api/sitemap-routes | jq length
   ```
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –∑–∞–ø–∏—Å–µ–π –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–µ `slug`

---

### –û—à–∏–±–∫–∞: "Permission denied"

**–ü—Ä–∏—á–∏–Ω–∞:** Service Account –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ Google Search Console

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
2. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ GSC –∫–∞–∫ –í–ª–∞–¥–µ–ª—å—Ü–∞

---

### –û—à–∏–±–∫–∞: "API not enabled"

**–ü—Ä–∏—á–∏–Ω–∞:** Indexing API –Ω–µ –≤–∫–ª—é—á–µ–Ω –≤ Google Cloud

**–†–µ—à–µ–Ω–∏–µ:**
1. Google Cloud Console ‚Üí API –∏ —Å–µ—Ä–≤–∏—Å—ã ‚Üí –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞
2. –ù–∞–π–¥–∏—Ç–µ "Indexing API"
3. –ù–∞–∂–º–∏—Ç–µ "–í–∫–ª—é—á–∏—Ç—å"

---

### –û—à–∏–±–∫–∞: "Quota exceeded"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–µ–≤—ã—à–µ–Ω –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç 200 URL

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è
2. –ò–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–≤–æ—Ç—ã –≤ Google Cloud Console

---

### –û—à–∏–±–∫–∞: "service-account.json not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª –ª–µ–∂–∏—Ç –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–æ—á–Ω–æ `service-account.json`)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ GSC

1. Google Search Console ‚Üí –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü
2. –ß–µ—Ä–µ–∑ 1-3 –¥–Ω—è –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –±–æ–ª—å—à–µ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Google –ø–æ–∏—Å–∫–µ

```
site:uhti.kz
```

**–ü—Ä–æ–≥—Ä–µ—Å—Å:**
- –î–µ–Ω—å 1: 3-5 —Å—Ç—Ä–∞–Ω–∏—Ü
- –î–µ–Ω—å 3: 10-15 —Å—Ç—Ä–∞–Ω–∏—Ü
- –î–µ–Ω—å 5: 20-25 —Å—Ç—Ä–∞–Ω–∏—Ü

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –°–æ–∑–¥–∞–Ω Google Cloud –ø—Ä–æ–µ–∫—Ç
- [ ] –í–∫–ª—é—á–µ–Ω Indexing API
- [ ] –°–æ–∑–¥–∞–Ω Service Account
- [ ] –°–∫–∞—á–∞–Ω JSON –∫–ª—é—á
- [ ] Service Account –¥–æ–±–∞–≤–ª–µ–Ω –≤ GSC –∫–∞–∫ –í–ª–∞–¥–µ–ª–µ—Ü
- [ ] –§–∞–π–ª `service-account.json` –ø–æ–ª–æ–∂–µ–Ω –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω `service-account.json` –≤ `.gitignore`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm install googleapis`)
- [ ] –ó–∞–ø—É—â–µ–Ω —Å–∫—Ä–∏–ø—Ç (`node scripts/request-indexing.js`)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ (–≤—Å–µ ‚úÖ)
- [ ] –ß–µ—Ä–µ–∑ 3 –¥–Ω—è: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ GSC

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Google Indexing API Docs](https://developers.google.com/search/apis/indexing-api/v3/quickstart)
- [Google Cloud Console](https://console.cloud.google.com/)
- [Google Search Console](https://search.google.com/search-console)
- [googleapis npm package](https://www.npmjs.com/package/googleapis)

---

**–î–∞—Ç–∞:** 2026-01-09
**–ê–≤—Ç–æ—Ä:** Claude Code
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
